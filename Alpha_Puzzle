#include<iomanip>
#include<iostream>
#include<conio.h>
#include<windows.h>
#include<stdlib.h>
#include<ctime>
using namespace std;
void clrscr()
{
  system("cls");
}
void title()
{
  cout<<"======================================================================================";
  cout<<"|8382681019811097116104                                                              |";
  cout<<"|                        |                                                           |";
  cout<<"|                       |||                                                          |";
  cout<<"|                      || ||                                                         |";
  cout<<"|                     ||| |||       ___      ______  ___  ___      ___               |";
  cout<<"|                    |||   |||      |||      ||||||  |||  |||      |||               |";
  cout<<"|                   |||     |||     |||      ||||||| |||  |||     |||||              |";
  cout<<"|                  |||||||||||||    |||      ||||||| ||||||||    ||| |||             |";
  cout<<"|                 |||||||||||||||   |||      ||||||  ||||||||   |||   |||            |";
  cout<<"|                |||           |||  |||      |||     |||  |||  |||||||||||           |";
  cout<<"|               |||             ||| |||||||| |||     |||  ||| |||       |||          |";
  cout<<"|               ---             --- -------- ---     ---  --- ---       ---          |";
  cout<<"|      _________                                       _______                       |";
  cout<<"|      |||||||||           ________  ________ ___      |||||||                       |";
  cout<<"|      |||||||||| ___  ___ ||||||||  |||||||| |||      |||                           |";
  cout<<"|      |||||||||| |||  |||     |||       |||  |||      |||                           |";
  cout<<"|      |||||||||  |||  |||    |||       |||   |||      |||||                         |";
  cout<<"|      |||        |||  |||   |||       |||    |||      |||                           |";
  cout<<"|      |||        |||  |||  |||       |||     |||      |||                           |";
  cout<<"|      |||        |||||||| ||||||||  |||||||| |||||||| |||||||                       |";
  cout<<"|      ---        -------- --------  -------- -------- -------                       |";
  cout<<"|                                                                      PRESS ANY KEY |";
  cout<<"=====================================================================================";

}
void show(char a[][10],int r3,int c3,int r4,int c4,int b[100],int max,int kk)
{
	int t;
	t=a[r3][c3];
	a[r3][c3]=a[r4][c4];
	a[r4][c4]=t;

	cout<<"======================================================================================";
  	cout<<"||||||||||||||||||||||||||IIIIII       SOLVE IT      IIIIII|||||||||||||||||||||||||||";
  	cout<<"======================================================================================"<<endl<<endl;

	cout<<"\n\t                    Use W, S, A, D to Move"<<endl;
	cout<<"\n\t                    ";
	for(int w=0;w<max;w++)
	cout<<"+-----";
	cout<<"+"<<endl;
	for(int i=0;i<max;i++)
	  {
	  cout<<"\t                    ";
	  for(int j=0;j<max;j++)
			 if(a[i][j]==64)
			 cout<<"|     ";
			 else
			 cout<<"|  "<<a[i][j]<<"  ";
	  cout<<"|"<<endl;
	  cout<<"\t                    ";
	for(int w=0;w<max;w++)
		cout<<"+-----";
	cout<<"+"<<endl;
	  }
	if(kk==99)
	cout<<"\n\n  INVALID MOVE -----------------------------------------------------------------";
}
void read(int a[][10],int b[100],int max)
{
	srand(time(0));
	clrscr();
	cout<<"\n\n\n\n\n\n\n\n\n\n\n\t\t\t\t     LOADING";
	int m=1,c,n,i,j;
	for(i=0;i<max;i++)
	 {
		 /*clrscr();
		   cout<<"\n\n\n\n\n\n\n\n\n\n\n\t\t\t\t     LOADING";
		   clrscr(); */
		 for(j=0;j<max;j++)
		  {
			  aaa:
			  c=0;

			/*  for(m=0;m<100;m++)
			  {
				 cout<<"\n\n\n\n\n\n\n\n\n\n\n\t\t\t\t     LOADING";
				  clrscr();
			  }
			  for(int m=0;m<100;m++)
			  {
				cout<<"\n\n\n\n\n\n\n\n\n\n\n\t\t\t\t     LOADING.";
				 clrscr();
			  }
			  clrscr();
			  for(int m=0;m<100;m++)
			  {
				 cout<<"\n\n\n\n\n\n\n\n\n\n\n\t\t\t\t     LOADING..";
				  clrscr();
			  }*/
			  for(int m=0;m<100;m++)
			  {
				// cout<<"\n\n\n\n\n\n\n\n\n\n\n\t\t\t\t     LOADING...";
				//  clrscr();
				  
				  n=rand()%100;
			  }
			  //clrscr();
				for(int k=0;k<max;k++)
				  for(int l=0;l<max;l++)
					 if(a[k][l]==n+1)
						 {
								c++;
                //      cout<<"\n\n\n\n\n\n\n\n\n\n\n\t\t\t\t     LOADING";
				//			 clrscr();
						 }
				if(c==0)
				  a[i][j]=n+1;
				else
				goto aaa;
		  }
	  }
	a[max-1][max-1]=0;
	int z=0;
	for(i=0;i<max;i++)
	 {
		 for(j=0;j<max;j++,z++)
			 b[z]=a[i][j];
	 }
}
void sort(int b[100],int max)
{
	 int t;
	 for(int i=0;i<max*max;i++)
		for(int j=0;j<max*max;j++)
		  if(b[i]<b[j])
		  {
			  t=b[i];
			  b[i]=b[j];
			  b[j]=t;
		  }
}
void change(int a[][10],int b[100],char c[10][10],int max)
{
  int e=0;
		 for(int m=0;m<max*max;m++)
			for(int k=0;k<max;k++)
			  for(int l=0;l<max;l++)
				 if(a[k][l]==b[m])
				 {
					c[k][l]=64+e;
					e++;
				 }
}
int ck(char b[][10],int mv,int max)
{
	int c=0,m=65;
	for(int i=0;i<max;i++)
	  for(int j=0;j<max;j++)
		 if(b[i][j]==m)
		 {
			m++;
			c++;
		 }
	if(c==max*max-1)
	{
	  clrscr();
	  cout<<"\n\n\n\n\n\n\n\n\n\n\n";
	  cout<<"|||||||||||||||||||||||||IIIIII       GAME OVER      IIIIII|||||||||||||||||||||||||||"<<endl<<endl;
  	  
	  cout<<"                                 Total Moves : "<<mv<<endl;
	  return 10;
	}
	else
	return 0;
}
int main(void)
{
  HWND console = GetConsoleWindow();
  RECT r;
  GetWindowRect(console, &r); //stores the console's current dimensions
  MoveWindow(console, r.left, r.top, 730, 430, TRUE); // 700 width, 430 height
	
	 title();
	 getch();
	 clrscr();

	 char choose;
	 int sel=1,nn=0;

  clrscr();

  cout<<"======================================================================================";
  cout<<"||||||||||||||||||||||||||IIIIII      GAME MENU      IIIIII|||||||||||||||||||||||||||";
  cout<<"======================================================================================"<<endl;

  cout<<"\n  SELECT MODE                                                               "<<endl;
  cout<<"--------------------------------------------------------------------------------------"<<endl<<endl<<endl;
  cout<<"        { 1. EASY    }         "<<endl;
  cout<<"          2. MEDIUM           "<<endl;
  cout<<"          3. HARD             "<<endl;
	cout<<"\n\n   Use W and S to move";
	cout<<"\n   Press F to select";

  while(nn==0)
  {
		  choose=getch();

		  if(choose=='w' || choose=='W')
		  {
			 if(sel==1)
{
			 clrscr();
  cout<<"======================================================================================";
  cout<<"||||||||||||||||||||||||||IIIIII      GAME MENU      IIIIII|||||||||||||||||||||||||||";
  cout<<"======================================================================================"<<endl;

  cout<<"\n  SELECT MODE                                                               "<<endl;
  cout<<"--------------------------------------------------------------------------------------"<<endl<<endl<<endl;
  cout<<"        { 1. EASY    }         "<<endl;
  cout<<"          2. MEDIUM           "<<endl;
  cout<<"          3. HARD             "<<endl;
	cout<<"\n\n   Use W and S to move";
	 cout<<"\n   Press F to select";
	 sel=1;
}
		  else if(sel==2)

{
			 clrscr();
	cout<<"======================================================================================";
  cout<<"||||||||||||||||||||||||||IIIIII      GAME MENU      IIIIII|||||||||||||||||||||||||||";
  cout<<"======================================================================================"<<endl;

  cout<<"\n  SELECT MODE                                                               "<<endl;
	 cout<<"--------------------------------------------------------------------------------------"<<endl<<endl<<endl;
  cout<<"        { 1. EASY    }         "<<endl;
  cout<<"          2. MEDIUM           "<<endl;
  cout<<"          3. HARD             "<<endl;
	cout<<"\n\n   Use W and S to move";
	 cout<<"\n   Press F to select";
	 sel=1;
}

		 else if(sel==3)
{
		  clrscr();
	 cout<<"======================================================================================";
  cout<<"||||||||||||||||||||||||||IIIIII      GAME MENU      IIIIII|||||||||||||||||||||||||||";
  cout<<"======================================================================================"<<endl;

  cout<<"\n  SELECT MODE                                                               "<<endl;
	 cout<<"--------------------------------------------------------------------------------------"<<endl<<endl<<endl;
  cout<<"          1. EASY              "<<endl;
  cout<<"        { 2. MEDIUM  }        "<<endl;
  cout<<"          3. HARD             "<<endl;

	cout<<"\n\n   Use W and S to move";
	 cout<<"\n   Press F to select";
	 sel=2;
}
		  }
		 else if(choose=='s' || choose=='S')
		  {

		 if(sel==1)
{
		  clrscr();
	 cout<<"======================================================================================";
  cout<<"||||||||||||||||||||||||||IIIIII      GAME MENU      IIIIII|||||||||||||||||||||||||||";
  cout<<"======================================================================================"<<endl;

  cout<<"\n  SELECT MODE                                                               "<<endl;
	 cout<<"--------------------------------------------------------------------------------------"<<endl<<endl<<endl;
  cout<<"          1. EASY              "<<endl;
  cout<<"        { 2. MEDIUM  }        "<<endl;
  cout<<"          3. HARD             "<<endl;
	cout<<"\n\n   Use W and S to move";
	 cout<<"\n   Press F to select";
	 sel=2;


}
	 else if(sel==2)
{
		  clrscr();
	cout<<"======================================================================================";
  cout<<"||||||||||||||||||||||||||IIIIII      GAME MENU      IIIIII|||||||||||||||||||||||||||";
  cout<<"======================================================================================"<<endl;

  cout<<"\n  SELECT MODE                                                               "<<endl;
	 cout<<"--------------------------------------------------------------------------------------"<<endl<<endl<<endl;
  cout<<"          1. EASY              "<<endl;
  cout<<"          2. MEDIUM          "<<endl;
  cout<<"        { 3. HARD    }         "<<endl;

	cout<<"\n\n   Use W and S to move";
	 cout<<"\n   Press F to select";
	 sel=3;
}
	 else if(sel==3)
{
		  clrscr();
	cout<<"======================================================================================";
  cout<<"||||||||||||||||||||||||||IIIIII      GAME MENU      IIIIII|||||||||||||||||||||||||||";
  cout<<"======================================================================================"<<endl;

  cout<<"\n  SELECT MODE                                                               "<<endl;
	 cout<<"--------------------------------------------------------------------------------------"<<endl<<endl<<endl;
  cout<<"          1. EASY              "<<endl;
  cout<<"          2. MEDIUM          "<<endl;
  cout<<"        { 3. HARD    }         "<<endl;

	cout<<"\n\n   Use W and S to move";
	 cout<<"\n   Press F to select";
	 sel=3;
}

	  }
	  else if(choose=='f')
		 nn=1;
  }

int max;
if(sel==1)
max=3;
if(sel==2)
max=4;
if(sel==3)
max=5;



	int a[10][10],b[100];
	int r1=max-1,c1=max-1;
	int r2,c2,mv=0;
	char ch,c[10][10];
	read(a,b,max);

	clrscr();
	sort(b,max);
	change(a,b,c,max);
	r2=r1;
	c2=c1;
	int kk=0;

	if(ck(c,mv,max)==10)
	 	return 0;
	else
	    show(c,r1,c1,r2,c2,b,max,kk);
	while(1)
	{
	  kk=0;
     unsigned long kk=0,kkk=0,kkkk=0;
	  r2=r1;
	  c2=c1;
	  ch=getch();
	 switch(ch)
	  {

		 case 'w':
		 case 'W':if(r1==0)
					 {
						r1=r1;
						kk=99;
					 }else
					 {
						r1=r1-1;
						mv++;
					 }
					 break;
		 case 's':
		 case 'S':if(r1==max-1)
					  {
						 r1=r1;
							kk=99;
					  }else
					  { r1=r1+1;
						mv++;
					 }
						break;
		 case 'a':
		 case 'A':if(c1==0)
					{
						c1=c1;
						  kk=99;
					}else
						{
						  c1=c1-1;
							mv++;
					 }
						break;
		 case 'd':
		 case 'D':if(c1==max-1)
					  {
						 c1=c1;
							kk=99;
					  }else
						{
						  c1=c1+1;
							mv++;
					 }
						break;
		 default: kk=99;
                 break;

		}

	 clrscr();
	 if(ck(c,mv,max)==10)
	 	return 0;
	 else
	 	show(c,r1,c1,r2,c2,b,max,kk);
	 }
}